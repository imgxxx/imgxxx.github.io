<!DOCTYPE html>
<html>
<head>
  <title>IP地址查询</title>
  <script>
    function getIPInfo() {
      var ipAddress = document.getElementById("ip-address").value;
      var url = "http://ip-api.com/json/" + ipAddress;

      fetch(url)
        .then(response => response.json())
        .then(data => {
          if (data.status === "success") {
            var country = data.country;
            var region = data.regionName;
            var city = data.city;
            var isp = data.isp;
            var location = country + ", " + region + ", " + city + ", " + isp;

            document.getElementById("result").innerHTML = "IP地址: " + ipAddress + "<br>位置: " + location;
          } else {
            document.getElementById("result").innerHTML = "无法获取IP地址的位置信息";
          }
        })
        .catch(error => {
          console.error(error);
        });
    }
  </script>

<script>
        function displayIP(ip) {
            document.getElementById("result").innerHTML = `您的IP地址是：${ip}`;
        }

        function queryIP() {
            var url = "http://ip-api.com/json/";

            // 发起请求
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    displayIP(data.query);
                })
                .catch(error => {
                    console.log(error);
                });
        }

        // 页面加载完成后自动查询IP
        window.onload = queryIP;
    </script>



</head>
<body>
  <h1>IP地址查询</h1>


  <label for="ip-address">输入IP地址：</label>
  <input type="text" id="ip-address" />
  <button onclick="getIPInfo()">查询</button>

  <div id="result"></div>
</body>
</html>